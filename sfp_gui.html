<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soft Front Panel - Switch Control</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        #switch-icon {
            cursor: pointer;
            width: 200px;
            height: auto;
            margin-bottom: 20px;
        }
        #dropdown {
            margin-bottom: 20px;
        }
        #response {
            color: green;
        }
        #error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Soft Front Panel - Switch Control</h1>
    <p>Click the switch icon to select and apply a path:</p>
    <img id="switch-icon" src="SP4T.png" alt="Switch Icon" onclick="showDropdown()">
    <div id="dropdown" style="display: none;">
        <label for="path-select">Select Path:</label>
        <select id="path-select">
            <option value="1">Path 1</option>
            <option value="2">Path 2</option>
            <option value="3">Path 3</option>
            <!-- Add more options as needed, e.g., from JSON -->
        </select>
        <button onclick="sendPath()">Apply Path</button>
    </div>
    <p id="response"></p>
    <p id="error"></p>

    <script>
        function showDropdown() {
            document.getElementById('dropdown').style.display = 'block';
        }

        function sendPath() {
            const pathSelect = document.getElementById('path-select');
            const pathNum = pathSelect.value;
            const scpiCmd = `PATH:SELECT ${pathNum}`;

            fetch('http://localhost:8080/command', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ scpi_command: scpiCmd })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('response').innerText = `Status: ${data.status}, Message: ${data.message}`;
                document.getElementById('error').innerText = '';
            })
            .catch(error => {
                document.getElementById('error').innerText = `Error: ${error.message}`;
                document.getElementById('response').innerText = '';
            });
        }
    </script>
</body>
</html>