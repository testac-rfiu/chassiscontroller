server.js — Soft Front Panel bridge & SCPI proxy
Serves the front panel from /public and forwards UI actions to a target controller over TCP/IP using SCPI. Keeps a configurable target IP/port, translates REST calls into SCPI, and returns parsed state to the UI.

Endpoints

POST /api/target { host, port } – set SCPI target (defaults to 127.0.0.1:5025).

POST /api/route/:sw/:p – 2×4 control; sends SWITCH:SELECT <sw> <p> then STATE?.

POST /api/path/:id – flat mode 1..8; sends PATH:SELECT <n> then STATE?.

GET /api/state – readback; sends STATE? and returns { ok, state }.

Transport
Raw TCP socket, newline-terminated commands/replies, 1500 ms timeout.

Run

npm install
npm start
# open http://localhost:8080


package.json — app manifest
Defines the app’s name, version, scripts, and dependency ranges that npm uses to install and run the project.

Scripts

"start": "node server.js" – launches the Express server.

Dependencies
express, cors (installed via npm install).

Notes
You edit this file (add/remove deps, scripts). Commit it.

package-lock.json — npm lockfile
Auto-generated by npm; pins exact versions of all direct/transitive dependencies for reproducible installs across teammates, CI, and devices.

Purpose

Deterministic installs (no “works on my machine”).

Integrity hashes + resolved tree for faster/safer installs.

Policy

Commit it. Don’t edit by hand.

Regenerated when dependencies change (npm install / updates).

public/index.html — Soft Front Panel (2×4)
Browser UI to pick Switch 1–2 and Path 1–4, set the target IP/port, send actions, and view JSON state/readback.

Controls

Target IP/Port input

Switch selector (1–2)

Path buttons (1–4)

“Read State” viewer (shows parsed JSON)

Endpoints used
Calls the backend: /api/route/:sw/:p, /api/state (and optionally /api/target).

Run
Served by Express from /public when you run:

npm start
# open http://localhost:8080
